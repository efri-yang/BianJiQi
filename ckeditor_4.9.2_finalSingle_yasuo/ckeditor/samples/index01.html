<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CKEditor Sample</title>
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.9.0/jquery.js"></script>

    <script src="../ckeditor.js"></script>
    <script type="text/javascript" src="./js/plupload/moxie.min.js"></script>
    <script type="text/javascript" src="./js/plupload/plupload.dev.js"></script>
    <script type="text/javascript" src="./js/layer/layer.js"></script>
    <script type="text/javascript" src="./js/tab.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/base.css" />
    <link rel="stylesheet" type="text/css" href="css/plugin.css">
    <style type="text/css">
.cke_toolbox .cke_toolbar:last-child>.cke_toolgroup>a:after{
        display: none;
}
#cke_editor .cke_button_label{
    
}
</style>
</head>



<body style="padding: 150px 150px;">
    <div>
        <p>1、对于图片上传进行了优化，图片修改进行优化(双击进行编辑)</p>
        <p>2、插入iframe表单进行优化(由于https与http问题暂时无法看见)</p>
        <p>3、整合常用的功能</p>
    </div>
    <div id="editor">
        <img src="./images/demo/01.jpg" width="200" />
        <p id="x22">foo<b>barcccccccccccccccccccccc</b>sadafasdfasdfasdfasdf  ^</p>
        <p id="x11"><a href="https://wwww.baidu.com?id=20&age=30" id="x1" >链接</a></p>

        <p id="x2"><a href="http://wwww.baidu.com" target="_self">链接2</a></p>
    </div>


<!--   <iframe class="iframe-box" frameborder="none" width="500" height="600" src="http://www.xiaoyu.com/enroll?app_id=2559"></iframe> -->

<button id="x1" style="">点击</button>

    

    <button id="btn-get-content">获取内容</button>

    <button id="btn-get-selectcontent">获取选中内容</button>
    <script>
    var editor = CKEDITOR.replace('editor', {
        height:500,
        /*enterMode:2,*/
        extraPlugins: 'imagesingle,imagegallery,iframebox,tablebox,link',
        allowedContent: true,
        // allowedContentRules:"p h1(left,right)",
       
        test:function(){
            alert(this.name);
        },
        imageGallery:{
            //上传文件配置
            plupload:{ 
                url: 'upload.php',
                multipart_params:{},//用户id和帖子id 等额外参数
                filters: {
                    max_imgfile_count: 3,
                    prevent_duplicates: true,
                    max_file_size: '50mb',
                    mime_types: [
                        { title: "Image files", extensions: "jpg,jpeg,gif,png" }
                    ]
                }
            },
            //相册类型的url
            gallerytypeUrl:"./gallerytype.php",
            //相册列表
            getGalleryListUrl:"./lazyload.php"
        },
        imageSingle:{
            plupload:{ 
                url: 'upload.php',
                multipart_params:{},//用户id和帖子id 等额外参数
                filters: {
                    max_imgfile_count: 3,
                    prevent_duplicates: true,
                    max_file_size: '50mb',
                    mime_types: [
                        { title: "Image files", extensions: "jpg,jpeg,gif,png" }
                    ]
                }
            }
        },


    });

    console.dir(editor);














    // var tpl = new CKEDITOR.template( '<div class="{cls}">{label}</div>' );
    // alert( tpl.output( { cls: 'cke-label', label: 'foo'} ) );







    $(function() {
        $("#btn-get-content").on("click", function() {
            alert(editor.getData())
            // alert(editor.getSelection().getSelectedText())
        });

        $("#btn-get-selectcontent").on("click",function(){
            console.dir(editor.getSelection())
        })
    })
    </script>
</body>

</html>