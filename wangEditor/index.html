<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="http://bbs.xmfish.com/images/pw_core.css?v=151020">
    <link rel="stylesheet" type="text/css" href="dist/css/wangEditor.css">
    <link rel="stylesheet" type="text/css" href="dist/webuploader/webuploader.css">
    <script type="text/javascript" src="dist/js/lib/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="static/layer/layer.js"></script>
    <script type="text/javascript" src="src/js/wangEditor.js"></script>
    
    <script type="text/javascript" src="dist/webuploader/webuploader.js"></script>
      <script type="text/javascript" src="dist/js/tab.js"></script>
    <script type="text/javascript" src="dist/js/webUploaderPlugin.js"></script>

  <!--   <script type="text/javascript" src="dist/js/imgupload.js"></script> -->
  </head>

<body>
    <!--  -->
    <div id="J_xy-editor-textarea" style="height:400px;max-height:500px; width: 100%;">
    </div>

    <div class="wangeditor-imgupload-dialog" data-relateto="J_xy-editor-textarea" style="top:20%;">
            <ul class="imgupload-tab-hd">
                <li class="active"><a href="#tabbd-localupload-container">本地上传</a></li>
                <li><a href="#tabbd-gallery-container">相册图片</a></li>
            </ul>
            <div class="wangeditor-localupload-container active"  data-relateto="#tabbd-localupload-container" >
                <div class="wangeditor-localupload-start" id="J_wangeditor-localupload-start">
                    <div class="webuploader-container" id="J_filePicker_1"></div>
                    <p class="tip-1">或将照片拖到这里，单次最多可选30张</p>
                </div>
                <div class="wangeditor-uploadfile-container">
                    <div class="wangeditor-uploadfile-hd">
                        <div class="img-upload-allprogress">
                            <span class="txt"></span>
                            <span class="percentage"></span>
                        </div>
                        <div class="img-upload-info"></div>
                        <a href="#" class="img-upload-btn">开始上传</a>
                        <div class="img-add-btn" id="J_filePicker_2">继续添加</div>
                    </div>
                    <ul class="wangeditor-uploadfile-list"></ul>
                    <div class="wangeditor-uploadfile-ft">
                        <label class="ft-save-checkbox">
                            <input type="checkbox" name="" />保存到相册</label>
                        <select class="ft-gallery-sel" disabled>
                            <option value="1">默认相册</option>
                        </select>
                        <a href="#" class="ft-btn-insert disabled">插入</a>
                        <a href="#" class="ft-btn-cancel">关闭</a>
                    </div>
                </div>
            </div>
            <div class="wangeditor-gallery-container" data-relateto="#tabbd-gallery-container">
                <div class="wangeditor-gallery-nodata" style="display:none;">
                    您的相册目前还没有照片,<a href="#">立马去上传</a>
                </div>
                <div class="wangeditor-gallery-hasdata" style="display:block;">
                    <ul class="wangeditor-gallery-list">
                        <li class="active">
                            <div class="pic"><img src="uploadDemo/01.jpg" /></div>
                            <span class="status-check"></span>
                        </li>

                        <li>
                            <div class="pic"><img src="uploadDemo/01.jpg" /></div>
                            <span class="status-check"></span>
                        </li>
                    
                    </ul>
                    <div class="wangeditor-gallery-ft">
                        <select class="ft-galleryall-sel">
                            <option value="1">默认相册</option>
                            <option value="2">相册2</option>
                        </select>
                        <a href="#" class="ft-galleryall-insert">插入</a>
                        <a href="#" class="ft-galleryall-cancel">取消</a>
                    </div>
                </div>
            </div>
    </div>

    <button id="btn-get-txt">获取文本(不包含html)</button>
    <button id="btn-get-html">获取内容(html和txt)</button>
    <button id="btn-get-select">获取选中的内容</button>
    <button id="btn-clear">清空内容</button>
    <script type="text/javascript">
    var editor = new wangEditor('J_xy-editor-textarea');

    // 菜单配置
    editor.config.menus = [
        'source',
        '|',
        'fontfamily',
        'fontsize',
        'bold',
        'underline',
        'italic',
        'forecolor',
        'bgcolor',
        'head',
        'strikethrough',
        'eraser',
        '|',
        'alignleft',
        'aligncenter',
        'alignright',
        'unorderlist',
        'orderlist',
        '|',
        'link',
        'unlink',
        'table',
        'img',
        'video',
        'emotion',
        'location',
        'insertcode',
        '|',
        'quote',
        'undo',
        'redo',
        '|',
        'fullscreen'
    ];

    editor.config.uploadImgUrl = './php/uploader.php';
    editor.config.uploadImgFileName = "wangfile";

    editor.config.webuploader={
        aaa:10
    }
    // editor.config.uploadImgFns = {
    //     onload: function(resultText, xhr) {
    //         alert(resultText);
    //     }
    // }
    // 配置自定义参数（举例）
    // editor.config.uploadParams = {
    //     token: 'abcdefg',
    //     user: 'wangfupeng1988'
    // };

    // 设置 headers（举例）
    // editor.config.uploadHeaders = {
    //     'Accept' : 'text/x-json'
    // };

    // 隐藏掉插入网络图片功能。该配置，只有在你正确配置了图片上传功能之后才可用。
    // editor.config.hideLinkImg = true;

    editor.create();



    $("#btn-get-txt").on("click", function() {
        alert(editor.$txt.text());

    });

    $("#btn-get-html").on("click", function() {
        alert(editor.$txt.html());
    });

    $("#btn-clear").on("click", function() {
        editor.clear();
    });

    $("#btn-get-select").on("click", function() {
        alert(editor.getRangeText());

        console.dir(editor.currentRange());
    });
    </script>
    <div style="height:200px; "></div>

    
    
</body>

</html>